[bug]freed memory too soon.