Bug 45306.  Fix provided by John Arthorne.  wait(0) waits indefinitely.  It looks good, and all tests pass.